<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Mentor - MentorMatch</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Main CSS -->
    <link rel="stylesheet" href="../CSS/Style.css">

    <!-- FullCalendar -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

    <style>
        .box-card {
            background: #ffffff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.08);
        }

        .notif-box,
        .review-box {
            border-radius: 10px;
            padding: 15px;
            background: #f7f7f7;
            border: 1px solid #e4e4e4;
        }

        #calendar-small, #calendar-big {
            background: white;
            border-radius: 15px;
            padding: 10px;
        }

        /* ======================= FULLCALENDAR RESPONSIVE FIX ======================= */

        @media (max-width: 576px) {

            /* reduce padding */
            #calendar-small,
            #calendar-big {
                padding: 5px !important;
            }

            /* header toolbar vertical */
            .fc-toolbar.fc-header-toolbar {
                flex-direction: column !important;
                gap: 6px;
                text-align: center;
            }

            .fc-toolbar-chunk {
                display: flex;
                justify-content: center;
            }

            /* texto más compacto */
            .fc {
                font-size: 0.75rem !important;
            }

            .fc-daygrid-day {
                padding: 2px !important;
            }

            .fc-scroller {
                overflow: hidden !important;
            }
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <div id="navbar"></div>

    <div class="container py-5">

        <h2 class="fw-bold mb-4">Dashboard Mentor</h2>

        <div class="row g-4">

            <!-- PRENOTAZIONI -->
            <div class="col-lg-6">
                <div class="box-card">
                    <h4 class="fw-bold mb-3">Prenotazioni</h4>
                    <div id="calendar-small"></div>
                </div>
            </div>

            <!-- AGENDA PERSONALE -->
            <div class="col-lg-6">
                <div class="box-card">
                    <h4 class="fw-bold mb-3">Agenda Personale</h4>
                    <div id="calendar-big"></div>
                </div>
            </div>

            <!-- NOTIFICHE -->
            <div class="col-lg-6">
                <div class="box-card">
                    <h4 class="fw-bold mb-3">Notifiche</h4>

                    <div class="notif-box mb-3">
                        <p class="fw-semibold mb-1">Nuova prenotazione ricevuta.</p>
                        <p class="small text-muted">Studente: Marco Bianchi — Domani alle 16:00</p>
                    </div>

                    <div class="notif-box mb-3">
                        <p class="fw-semibold mb-1">Modifica di agenda confermata.</p>
                        <p class="small text-muted">La tua disponibilità di venerdì è stata aggiornata.</p>
                    </div>

                    <div class="notif-box">
                        <p class="fw-semibold mb-1">Promemoria: lascia feedback agli ultimi 2 mentee.</p>
                    </div>

                </div>
            </div>

            <!-- RECENSIONI -->
            <div class="col-lg-6">
                <div class="box-card">
                    <h4 class="fw-bold mb-3">Recensioni</h4>

                    <div class="review-box mb-3">
                        <strong>“Ottima sessione!”</strong>
                        <p class="mb-1 small text-muted">Studente: Laura</p>
                        <p class="small">Molto chiaro e disponibile, grazie!</p>
                    </div>

                    <div class="review-box mb-3">
                        <strong>“Mi ha aiutato molto”</strong>
                        <p class="mb-1 small text-muted">Studente: Giuseppe</p>
                        <p class="small">Eccellente spiegazione sui miei dubbi.</p>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <!-- NAVBAR LOADER -->
    <script>
        fetch("../Components/navBar.html")
            .then(res => res.text())
            .then(html => {
                document.getElementById("navbar").innerHTML = html;

                document.getElementById("logoutBtn")?.addEventListener("click", () => {
                    localStorage.clear();
                    window.location.href = "Log.html";
                });
            });
    </script>

    <!-- FULLCALENDAR SCRIPT -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            const isMobile = window.innerWidth < 576;

            /* ========================= SMALL CALENDAR ========================= */

            const smallCal = new FullCalendar.Calendar(
                document.getElementById('calendar-small'),
                {
                    initialView: isMobile ? 'dayGridWeek' : 'dayGridMonth',
                    height: isMobile ? 280 : 320,

                    headerToolbar: isMobile
                    ? { left: 'prev,next', center: 'title', right: '' }
                    : { left: 'prev,next today', center: 'title', right: 'dayGridMonth,dayGridWeek' },

                    events: [
                        { title: 'Sessione — Luca', start: '2025-02-12T14:00', color: '#4a90e2' },
                        { title: 'Sessione — Ana', start: '2025-02-14T10:00', color: '#16a085' }
                    ]
                }
            );

            /* ========================= BIG CALENDAR ========================= */

            const bigCal = new FullCalendar.Calendar(
                document.getElementById('calendar-big'),
                {
                    initialView: isMobile ? 'timeGridDay' : 'timeGridWeek',
                    height: isMobile ? 400 : 550,
                    nowIndicator: true,

                    headerToolbar: isMobile
                    ? { left: 'prev,next', center: 'title', right: '' }
                    : { left: 'prev,next today', center: 'title', right: 'dayGridMonth,timeGridWeek,timeGridDay' },

                    events: [
                        { title: 'Disponibile', start: '2025-02-13T09:00', end: '2025-02-13T12:00', color: '#d1ecf1' },
                        { title: 'Sessione — Mario', start: '2025-02-15T14:00', end: '2025-02-15T15:00', color: '#007bff' }
                    ]
                }
            );

            smallCal.render();
            bigCal.render();
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
